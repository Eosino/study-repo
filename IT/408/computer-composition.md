# 1. 计算机系统概述
## 1.1. 计算机层次结构
1. 计算机系统由硬件和软件两大部分组成
    * 硬件：物理实体、物质基础。
      1. 冯诺依曼计算机：
         * 硬件系统的五大部件：运算器、控制器、存储器、输入设备、输出设备。
         * 采用存储程序工作方式，此为计算机能自动控制处理的基础。
         * 指令和数据存放在存储器中，按地址访问，CPU根据指令周期的不同阶段来区分指令和数据。（计算机内部采用用二进制“0”、“1”来表示指令和数据，两者在形式上没有区别）
         * 指令由操作码和地址码组成。
      2. 早期计算机以运算器为核心，运算器与控制器分离；现代计算机以存储器为核心，运算器与控制器集成在一个芯片称为CPU。
      3. 运算器的核心是ALU（算术逻辑单元），负责算术运算和逻辑运算。
      4. 控制器的核心是CU（控制单元），一般由指令寄存器、指令译码器、时序电路、控制电路组成，负责从内存取指令和执行指令。
      5. 现代计算机由两大部分组成：
         * 主机：包括CPU和主存储器（内存）
         * 外部设备（外设）：包括I/O设备与外存（注：硬盘属于外存）
    * 软件：程序（指令序列）、数据。
      1. 软件按其功能可分为系统软件和应用软件。系统软件通常包括操作系统、语言处理程序（汇编程序、编译程序、解释程序等）、各种服务程序（诊断程序、排错程序、练习程序等）和数据库管理系统等；其他基本都属于应用软件。
      2. 软件和硬件相辅相成、缺一不可；对于某一个功能，既可以由硬件来实现（效率高、成本高），也可以由软件来实现（效率低、成本低），称为软硬件在逻辑上是等效的。
      3. 计算机的层级结构由高到低依次为：高级语言层、汇编语言层、操作系统层、机器语言层、微指令系统层。（高级语言层之上还可以有应用层；下层是上层的基础，上层是下层的拓展）
      4. 计算机的编程语言分为三大类：机器语言、汇编语言、高级语言。（前两者可称为低级语言）
      5. 只有机器语言可被计算机直接识别和执行，而能把高级语言翻译成机器语言的程序称为翻译程序，有两种：编译程序和解释程序。
         * 编译程序：将编译型高级语言（如C/C++）一次性翻译为汇编语言或机器语言，最后生成目标程序再执行。
         * 解释程序：将解释型高级语言（如Python）一句句翻译为机器语言，翻译一句执行一句，最后不会生成目标程序。
         * 汇编程序：将汇编语言翻译为机器语言。（汇编语言属于编译型语言，虽不是高级语言，但也属于翻译程序）

## 1.2. 计算机性能指标
1. 吞吐量：单位时间内处理请求的数量。
2. 响应时间：对请求作出响应的时间，包括CPU执行时间和等待时间（包括存储访问、I/O操作、操作系统开销等）
3. 时钟周期（CPU时钟周期）：CPU完成一个最基本动作的时间，是计算机内最小的时间单位。
4. 时钟频率（主频）：主频 = $\frac{1}{时钟周期}$；通常以Hz为单位，表示1秒内CPU执行的次数，也就是1秒内包含的时钟周期数。
5. CPI（Clock cycle Per Instruction）：执行一条指令所需的时钟周期数。程序的CPI是程序内所有指令的CPI的平均数。
6. CPU执行时间 = 指令条数 $\times$ CPI $\times$ 时钟周期 = $\frac{指令条数 \times CPI}{主频}$
7. MIPS：每秒执行多少百万条指令。MIPS = $\frac{主频}{CPI \times 10^6}$
8. FLOPS（Floating-point Operations Per Second）：每秒执行多少次浮点运算。通过下面记住常用单位的幂次：
    * MFLOPS（Million FLOPS）：$10^6$（百万）
    * GFLOPS（Giga FLOPS）：$10^9$（十亿）
    * TFLOPS（Tera FLOPS）：$10^12$（万亿）
    * PFLOPS（Peta FLOPS）：$10^15$（千万亿）
    * EFLOPS（Exa FLOPS）：$10^18$（百京；1京=1亿亿=$10^{16}$）
    * ZFLOPS（Zetta FLOPS）：$10^21$（十万京）

>描述速率、频率等，k、M、G、T通常用10的幂次表示，如 $8kb=8\times10^3b/s$  
>描述容量、大小等，K、M、G、T通常用2的幂次表示，如 $8KB=(2^3)^{10}B$

* 位（bit）：$1bit$ 就是1个二进制位，即 $1b$
* 字节（Byte）：一个字节等于8个二进制位，即 $1B=8b$
* 字（Word）：计算机进行数据存储和处理的运算单位；字长即字的位数，常说的32位和64位计算机就是指字长：
    * 32位计算机：32位=4字节=1字
    * 64位计算机：64位=8字节=1字
* 机器字长：计算机能直接处理的二进制数据的位数，一般等于内部寄存器的位数和ALU运算数据的字长，决定了计算机的运算精度。
* 指令字长：一个指令字中包含的二进制代码的位数。
* 存储字长：一个存储单元存储的二进制代码长度。

>指令字长一般取存储字长的整数倍，若是两倍，则需要两次访问取出一条指令。

1. 基准测试程序：用于测试和预测计算计算机系统的性能，揭示不同结构机器的长处和短处。
2. 编译优化：针对具体处理器的特性对代码进行汇编调整，提升执行效率。
3. 指令集体系结构（ISA）定义了一台计算机可执行的所有指令的集合。
4. 透明的意思是看不见；下层对上层透明，就是上层无法看见下层的内部细节。
5. 系列机指基本指令系统、基本体系结构相同的一系列不同型号的计算机，可以保证软件或硬件的兼容性。
6. 固件：指存储在只读存储器（ROM）中的程序（如BIOS），一般担任系统最基础最底层的工作；固件是软硬件结合的产物，性能优于软件，又比存硬件灵活。
7. 数据通路：指令在执行过程中数据所经过的部件以及部件之间的连接线路，主要组成有：ALU、寄存器、主存、总线等。

# 2. 数制与编码
## 2.1. 进制
|进制|英文|范围|前缀|后缀|
|-|-|-|-|-|
|二进制|Binary|0-1|0b|B|
|八进制|Octal|0-7|0|O|
|十进制|Decimal|0-9|无|D|
|十六进制|Hexadecimal|0-9,A-F|0x|H|

>二进制与八进制的转换：3位二进制数对应1位八进制数，位数不是3的倍数时前面加0  
>二进制与十六进制的转换：4位二进制数对应1位十六进制数，位数不是4的倍数时前面加0
>八进制与十六进制的转换：先转为二进制

|二进制|八进制|十进制|十六进制|
|-|-|-|-|
|0000|0|0|0|
|0001|1|1|1|
|0010|2|2|2|
|0011|3|3|3|
|0100|4|4|4|
|0101|5|5|5|
|0110|6|6|6|
|0111|7|7|7|
|1000|10|8|8|
|1001|11|9|9|
|1010|12|10|A|
|1011|13|11|B|
|1100|14|12|C|
|1101|15|13|D|
|1110|16|14|E|
|1111|17|15|F|

* 其他进制转十进制：将每一位与其权重相乘再累加，如：$(1010)_2=1$$\times 2^3+1\times 2^1=10$，$(F5)_{16}=15\times 16^1+5\times 16^0=245$
* 十进制转其他进制：
    1. 整数部分：除N取余，逆序排列（N为进制的基数：2、8或16等）
        * 可在熟悉常见2的n次幂结果基础上，快速处理：$42=32+8+2=2^5+2^3+2^1=101010$
    2. 小数部分：乘N取整，顺序排列
        * 同样可以：$0.875=0.5+0.25+0.125=2^{-1}+2^{-2}+2^{-3}=0.111$

>实际做题时，可将常见2的n次幂、十六进制中字母与数字的对应一次性列出来进行参考，防止一个个转换时慢且易错：  

|A|B|C|D|E|F|
|-|-|-|-|-|-|
|10|11|12|13|14|15|

|$2^{16}$|$2^{15}$|$2^{12}$|$2^{11}$|$2^{10}$|$2^9$|$2^8$|$2^7$|$2^6$|$2^5$|$2^4$|$2^3$|$2^2$|$2^1$|$2^0$|$2^{-1}$|$2^{-2}$|$2^{-3}$|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|65536|32768|4096|2048|1024|512|256|128|64|32|16|8|4|2|1|0.5|0.25|0.125|

>十进制转二进制时，先列出连续的2的n次幂，然后补1或0即可：

|题目|256|128|64|32|16|8|4|2|1|结果|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|42=32+8+2||||1|0|1|0|1|0|101010|
|123=64+32+16+8+2+1|||1|1|1|1|0|1|1|1111011|

## 2.2. 编码
* 真值：像 $-1,+2$ 这种带正负号的数称为真值，就是真正的值，一般用十进制表示，也可以用二进制。  
* 机器数：将数值数据在计算机中编码表示后的数称为机器数，常用的有原码、补码、移码。
* 定点小数：约定小数点在数值位的左边。
* 定点整数：约定小数点在数值位的右边。

|编码（设字长为n+1）|定义|转换|整数表示范围|机器数0|用途|
|-|-|-|-|-|-|
|原码|符号位0表示正数，1表示负数|真值转为二进制，补零，确定符号位|$-(2^n-1)\sim 2^n-1$|$[00...0]或[10...0]|表示IEEE754浮点数的尾数|
|反码|若符号位是1则将数值位逐位翻转|正数时，反码=原码；负数时，数值位翻转|$-(2^n-1)\sim 2^n-1$|[00...0]或[10...0]|数码变换的中间形式|
|补码|用加法来实现减法运算|正数时，补码=反码=原码；负数时，反码末位+1|$-2^n\sim 2^n-1$|[00...0]|表示计算机中的有符号数|
|移码|可以按无符号数比较的大小反映真值的相对大小|对补码的符号位取反得移码|$-2^n\sim 2^n-1$|[10...0]|表示浮点数的指数|

>$[x]_补\xrightarrow{符号位、数值位全取反，末位+1}[-x]_补$

|带符号|无符号|32位|64位|
|:-:|:-:|:-:|:-:|
|char|unsigned char|1B|1B|
|short|unsigned short|2B|2B|
|int|unsigned int|4B|4B|
|long|unsigned long|4B|8B|
|float||4B|4B|
|double||8B|8B|
